<!doctype html>
<html lang="hi">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Omniverse AI Tools Marketplace — Local Demo</title>
  <meta name="description" content="Zero-cost, donation-ready client-side AI tools marketplace — LocalStorage based" />
  <style>
    /* Simple modern UI, single-file CSS */
    :root{
      --bg:#071025; --card:#0b1220; --muted:#9fb0d9; --accent:#60a5fa; --glass: rgba(255,255,255,0.03);
    }
    *{box-sizing:border-box}
    html,body{height:100%;margin:0;font-family:Inter,system-ui,-apple-system,Segoe UI,Roboto,"Helvetica Neue",Arial;background:linear-gradient(180deg,#071025,#021029);color:#e6eef8}
    .wrap{max-width:1150px;margin:18px auto;padding:18px}
    header{display:flex;gap:12px;align-items:center;justify-content:space-between;margin-bottom:14px}
    h1{margin:0;font-size:18px}
    .muted{color:var(--muted);font-size:13px}
    .grid{display:grid;grid-template-columns:320px 1fr;gap:14px}
    .card{background:linear-gradient(180deg,var(--card), rgba(0,0,0,0.02));border:1px solid var(--glass);padding:12px;border-radius:10px}
    .small{font-size:13px;color:var(--muted)}
    .sites{display:flex;flex-direction:column;gap:8px}
    select,input,textarea,button{font-family:inherit;font-size:14px}
    select,input,textarea{width:100%;padding:8px;border-radius:8px;border:1px solid rgba(255,255,255,0.04);background:transparent;color:inherit}
    button{background:var(--accent);border:0;padding:8px 10px;border-radius:8px;color:#042;cursor:pointer}
    .ghost{background:transparent;border:1px solid rgba(255,255,255,0.06);color:#e6eef8}
    .row{display:flex;gap:8px;align-items:center}
    .meta{font-size:12px;color:var(--muted);margin-top:6px}
    textarea{min-height:96px;resize:vertical}
    .tools-list{display:flex;flex-direction:column;gap:6px}
    .tool-item{padding:8px;border-radius:8px;border:1px solid rgba(255,255,255,0.03);background:linear-gradient(180deg,rgba(255,255,255,0.01),transparent);cursor:pointer;display:flex;justify-content:space-between;align-items:center}
    .badge{background:rgba(255,255,255,0.03);padding:4px 8px;border-radius:999px;font-size:12px}
    footer{margin-top:14px;color:var(--muted);font-size:13px;text-align:center}
    .controls{display:flex;gap:8px;flex-wrap:wrap}
    .split{display:grid;grid-template-columns:1fr 1fr;gap:8px}
    .hidden{display:none}
    .note{font-size:12px;color:var(--muted);margin-top:8px}
    .topbar-actions{display:flex;gap:8px;align-items:center}
    .danger{background:#ff6b6b;color:#08121a}
    .flex-gap{display:flex;gap:8px}
    pre{background:#021225;padding:8px;border-radius:8px;overflow:auto;font-size:13px}
  </style>
</head>
<body>
  <div class="wrap">
    <header>
      <div>
        <h1>Omniverse AI Tools Marketplace</h1>
        <div class="muted">Zero-cost · Donation-ready — सभी settings और stats आपके ब्राउज़र में localStorage में सुरक्षित रहते हैं</div>
      </div>
      <div class="topbar-actions">
        <button id="btnOpenStats" class="ghost">Open Dashboard (local stats)</button>
        <button id="btnOwnerSettings" class="ghost">Owner Settings</button>
      </div>
    </header>

    <div class="grid">
      <!-- LEFT: Tools list + Owner / Admin -->
      <div>
        <div class="card">
          <div style="display:flex;justify-content:space-between;align-items:center">
            <div>
              <div class="small">Local</div>
              <strong id="marketTitle">AI Tools</strong>
              <div class="meta" id="toolsCount">Tools: 0</div>
            </div>
            <div class="badge" id="usesSummary">Downloads: 0 • Uses: 0</div>
          </div>

          <hr style="border:none;height:10px">

          <div class="tools-list" id="toolsList"></div>

          <div style="margin-top:10px" class="row">
            <button id="btnAddDemoTool">+ Add Demo Tools</button>
            <button id="btnResetTools" class="ghost">Reset Tools</button>
          </div>
          <div class="note">किसी भी टूल को चुनें, JSON input भरें और Generate दबाएँ।</div>
        </div>

        <div class="card" style="margin-top:12px">
          <strong>Owner Settings</strong>
          <div class="meta">यह सभी settings केवल आपके ब्राउज़र में सेव होते हैं — कोई secret GitHub पर नहीं भेजें।</div>
          <div style="margin-top:8px" id="ownerSettingsForm">
            <label class="small">Owner name</label>
            <input id="ownerName" placeholder="आपका नाम (Owner)" />
            <label class="small" style="margin-top:8px">Donate / Pay links (comma separated)</label>
            <input id="donateLinks" placeholder="upi:abc@bank, https://paypal.me/you, https://ko-fi.com/you" />
            <div style="margin-top:8px" class="row">
              <button id="btnSaveOwner">Save Settings</button>
              <button id="btnResetOwner" class="ghost">Reset</button>
            </div>
            <div class="small note">Owner settings ब्राउज़र में ही रहते हैं। Export/Import करके आप किसी और मशीन पर restore कर सकते हैं।</div>
          </div>

          <hr style="border:none;height:10px">

          <div class="small">Admin actions</div>
          <div class="row" style="margin-top:8px">
            <button id="btnExportSettings" class="ghost">Export Settings</button>
            <button id="btnImportSettings" class="ghost">Import Settings</button>
            <button id="btnResetStats" class="ghost danger">Reset Stats</button>
          </div>
        </div>

        <div class="card" style="margin-top:12px">
          <strong>Quick Actions</strong>
          <div class="row" style="margin-top:8px">
            <button id="btnShowOwner" class="ghost">Show Owner Settings</button>
            <button id="btnExportStats" class="ghost">Export Stats</button>
            <button id="btnImportStats" class="ghost">Import Stats</button>
          </div>
        </div>
      </div>

      <!-- RIGHT: Tool work area -->
      <div>
        <div class="card">
          <div style="display:flex;justify-content:space-between;align-items:center">
            <div>
              <div class="small">— Select a tool —</div>
              <strong id="selectedToolTitle">Tool description will appear here.</strong>
              <div class="meta" id="selectedToolDesc">Tool description will appear here.</div>
            </div>
            <div class="flex-gap">
              <div class="small">Uses: <span id="selUses">0</span></div>
              <div class="small">Downloads: <span id="selDownloads">0</span></div>
            </div>
          </div>

          <hr style="border:none;height:10px">

          <div class="split">
            <div>
              <div class="small">Enter JSON input for the selected tool</div>
              <textarea id="jsonInput">{ "name": "Your Name", "field":"AI" }</textarea>
              <div class="row" style="margin-top:8px">
                <button id="btnGenerate">Generate</button>
                <button id="btnClear" class="ghost">Clear</button>
              </div>
              <div class="note">Tip: जितना structured JSON देंगे output उतना बेहतर होगा।</div>
            </div>

            <div>
              <div class="small">AI output will appear here</div>
              <pre id="outputArea">Output will appear here...</pre>
              <div class="row" style="margin-top:8px">
                <button id="btnDownload">⬇️ Download</button>
                <button id="btnCopy" class="ghost">Copy</button>
                <button id="btnResetSelStats" class="ghost">Reset Tool Stats</button>
              </div>
            </div>
          </div>

        </div>

        <div class="card" style="margin-top:12px">
          <strong>Usage & Notes</strong>
          <div class="small note">
            यह demo fully client-side है — कोई external API नहीं कॉल करता। जब आप advanced AI कॉल करना चाहें (OpenAI आदि), तो Owner Settings में API key जोड़ने का विकल्प जोड़ा जा सकेगा।<br>
            सभी settings और stats केवल आपकी मशीन पर रहते हैं — अगर आप export नहीं करेंगे तो परिवर्तन GitHub पर नहीं दिखेंगे।
          </div>

          <div style="margin-top:8px" id="donateArea"></div>
        </div>
      </div>
    </div>

    <footer>© Omniverse Marketplace — localStorage में settings & stats। Deploy: GitHub Pages.</footer>
  </div>

  <script>
  /***************************************************************************
   * Complete single-file JS for Omniverse Marketplace
   * - Zero external calls
   * - All data stored in localStorage under keys:
   *    OMNI_TOOLS_v1, OMNI_OWNER_v1, OMNI_STATS_v1
   * - You can always delete localStorage to reset fully
   ***************************************************************************/

  (function(){
    // storage keys
    const TOOL_KEY = 'OMNI_TOOLS_v1';
    const OWNER_KEY = 'OMNI_OWNER_v1';
    const STATS_KEY = 'OMNI_STATS_v1';

    // DOM
    const toolsListEl = document.getElementById('toolsList');
    const toolsCountEl = document.getElementById('toolsCount');
    const usesSummaryEl = document.getElementById('usesSummary');
    const selectedToolTitle = document.getElementById('selectedToolTitle');
    const selectedToolDesc = document.getElementById('selectedToolDesc');
    const jsonInput = document.getElementById('jsonInput');
    const btnGenerate = document.getElementById('btnGenerate');
    const outputArea = document.getElementById('outputArea');
    const btnDownload = document.getElementById('btnDownload');
    const btnCopy = document.getElementById('btnCopy');
    const btnClear = document.getElementById('btnClear');
    const ownerNameInput = document.getElementById('ownerName');
    const donateLinksInput = document.getElementById('donateLinks');
    const btnSaveOwner = document.getElementById('btnSaveOwner');
    const btnResetOwner = document.getElementById('btnResetOwner');
    const btnExportSettings = document.getElementById('btnExportSettings');
    const btnImportSettings = document.getElementById('btnImportSettings');
    const btnResetStats = document.getElementById('btnResetStats');
    const btnShowOwner = document.getElementById('btnShowOwner');
    const btnAddDemoTool = document.getElementById('btnAddDemoTool');
    const btnResetTools = document.getElementById('btnResetTools');
    const selUsesEl = document.getElementById('selUses');
    const selDownloadsEl = document.getElementById('selDownloads');
    const btnResetSelStats = document.getElementById('btnResetSelStats');
    const donateArea = document.getElementById('donateArea');
    const btnOpenStats = document.getElementById('btnOpenStats');
    const btnExportStats = document.getElementById('btnExportStats');
    const btnImportStats = document.getElementById('btnImportStats');

    // app state
    let tools = [];
    let owner = {};
    let stats = {}; // { toolId: { uses:0, downloads:0 } , totals: { uses, downloads } }
    let selectedToolId = null;

    // utilities
    function uid(prefix='t'){ return prefix + '_' + Math.random().toString(36).slice(2,9); }
    function saveTools(){ localStorage.setItem(TOOL_KEY, JSON.stringify(tools)); }
    function loadTools(){ try{ tools = JSON.parse(localStorage.getItem(TOOL_KEY)) || []; }catch(e){ tools=[] } }
    function saveOwner(){ localStorage.setItem(OWNER_KEY, JSON.stringify(owner)); }
    function loadOwner(){ try{ owner = JSON.parse(localStorage.getItem(OWNER_KEY)) || {}; }catch(e){ owner = {} } }
    function saveStats(){ localStorage.setItem(STATS_KEY, JSON.stringify(stats)); }
    function loadStats(){ try{ stats = JSON.parse(localStorage.getItem(STATS_KEY)) || { totals:{uses:0,downloads:0} }; }catch(e){ stats = { totals:{uses:0,downloads:0} } } }
    function updateSummary(){ const t = tools.length; toolsCountEl.textContent = `Tools: ${t}`; usesSummaryEl.textContent = `Downloads: ${stats.totals.downloads || 0} • Uses: ${stats.totals.uses || 0}`; }

    // default demo tools
    function defaultTools(){
      return [
        { id: uid('resume'), title: 'Resume Generator', desc: 'AI-powered resume (client-side demo). Input JSON: {name, role, summary, skills:[...]}', template: resumeTemplate },
        { id: uid('bio'), title: 'Bio Generator', desc: 'Short professional/personal bios. Input JSON: {name, field, tone}', template: bioTemplate },
        { id: uid('idea'), title: 'Business Idea Generator', desc: 'Generate startup ideas. Input JSON: {industry, budget, region}', template: ideaTemplate },
        { id: uid('script'), title: 'Script Writer', desc: 'Small code/script generator. Input JSON: {lang, purpose, length}', template: scriptTemplate },
        { id: uid('notes'), title: 'Study / Meeting Notes', desc: 'Summarize notes. Input JSON: {topic, points:[...]}', template: notesTemplate }
      ];
    }

    // --- Template functions (pure client-side pseudo-AI) ---
    // These functions accept a parsed JSON input and return string output.
    function resumeTemplate(data){
      const name = data.name || 'Your Name';
      const role = data.role || data.field || 'Professional';
      const summary = data.summary || `Experienced ${role} with strong skills.`;
      const skills = Array.isArray(data.skills) ? data.skills.join(', ') : (data.skills || '');
      return [
        `${name}`,
        `${role}`,
        `------------------------`,
        `Summary: ${summary}`,
        `Skills: ${skills}`,
        `Experience:`,
        `- ${data.experience || 'Describe your recent role and achievements.'}`,
        ``,
        `Generated by Omniverse — edit as needed.`
      ].join('\\n');
    }

    function bioTemplate(data){
      const name = data.name || 'Person';
      const field = data.field || 'their field';
      const tone = data.tone || 'professional';
      if(tone === 'casual'){
        return `${name} is a ${field} enthusiast who loves building things that make life easier. They enjoy learning and sharing ideas.`;
      }
      return `${name} is a ${field} professional with experience in delivering practical solutions. Known for problem-solving and attention to detail.`;
    }

    function ideaTemplate(data){
      const industry = data.industry || 'tech';
      const budget = data.budget || 'small';
      const region = data.region || 'local';
      return `Idea: A ${industry}-focused platform that connects ${region} creators with micro-services focused on ${budget} budgets.\\nRevenue: subscription + commission.\\nMVP: simple landing + 5 services.`;
    }

    function scriptTemplate(data){
      const lang = (data.lang || 'python').toLowerCase();
      const purpose = data.purpose || 'utility';
      const length = data.length || 'short';
      if(lang.includes('py')) {
        return `# ${purpose} (${lang})\\nimport sys\\n# TODO: implement ${purpose}\\nprint('This is a scaffold for ${purpose}')`;
      }
      if(lang.includes('js') || lang.includes('node')){
        return `// ${purpose} (${lang})\\nconsole.log('Scaffold for ${purpose}');`;
      }
      return `// ${purpose} — scaffold`;
    }

    function notesTemplate(data){
      const topic = data.topic || 'Topic';
      const points = Array.isArray(data.points) ? data.points : [data.points||'Main point'];
      return `Notes: ${topic}\\n- ${points.join('\\n- ')}\\n\\nGenerated by Omniverse.`;
    }

    // --- End templates ---

    // render tools list
    function renderTools(){
      toolsListEl.innerHTML = '';
      for(const t of tools){
        const div = document.createElement('div');
        div.className = 'tool-item';
        div.dataset.id = t.id;
        div.innerHTML = `<div>
            <strong style="font-size:14px">${t.title}</strong>
            <div class="small" style="margin-top:4px">${t.desc}</div>
          </div>
          <div style="display:flex;flex-direction:column;align-items:flex-end;gap:6px">
            <div class="badge">${(stats[t.id] && (stats[t.id].uses||0))||0} uses</div>
            <div style="font-size:12px;color:var(--muted)">${(stats[t.id] && (stats[t.id].downloads||0))||0} dl</div>
          </div>`;
        div.addEventListener('click', ()=>selectTool(t.id));
        toolsListEl.appendChild(div);
      }
      updateSummary();
    }

    // select tool
    function selectTool(id){
      const t = tools.find(x=>x.id===id);
      if(!t) return;
      selectedToolId = id;
      selectedToolTitle.textContent = t.title;
      selectedToolDesc.textContent = t.desc;
      selUsesEl.textContent = (stats[id] && stats[id].uses) || 0;
      selDownloadsEl.textContent = (stats[id] && stats[id].downloads) || 0;
      // default JSON input hint
      jsonInput.value = t.example || jsonInput.value;
    }

    // generate output (client-side pseudo-AI)
    function generateOutput(){
      if(!selectedToolId){ alert('पहले कोई टूल चुनें।'); return; }
      let parsed;
      try{
        parsed = JSON.parse(jsonInput.value);
      }catch(e){
        alert('Invalid JSON input — सही JSON दें। Example: { "name":"Your Name" }');
        return;
      }
      const t = tools.find(x=>x.id===selectedToolId);
      if(!t){ alert('Tool not found'); return; }
      // call template
      try{
        const result = (typeof t.template === 'function') ? t.template(parsed) : ('Template missing');
        outputArea.textContent = result;
        // update stats
        stats.totals.uses = (stats.totals.uses||0) + 1;
        stats[selectedToolId] = stats[selectedToolId] || { uses:0, downloads:0 };
        stats[selectedToolId].uses += 1;
        saveStats(); updateSummary(); selUsesEl.textContent = stats[selectedToolId].uses;
      }catch(e){
        outputArea.textContent = 'Error generating output: ' + e.message;
      }
    }

    // download output
    function downloadOutput(){
      if(!selectedToolId) { alert('पहले कोई टूल चुनें।'); return; }
      const content = outputArea.textContent || '';
      if(!content){ alert('कोई output नहीं है — Generate करें।'); return; }
      const blob = new Blob([content], { type:'text/plain;charset=utf-8' });
      const url = URL.createObjectURL(blob);
      const a = document.createElement('a');
      a.href = url;
      const safeName = (tools.find(t=>t.id===selectedToolId)?.title || 'omniverse-tool').replace(/\s+/g,'_');
      a.download = `${safeName}.txt`;
      document.body.appendChild(a);
      a.click();
      a.remove();
      URL.revokeObjectURL(url);
      // update download stats
      stats.totals.downloads = (stats.totals.downloads||0) + 1;
      stats[selectedToolId] = stats[selectedToolId] || { uses:0, downloads:0 };
      stats[selectedToolId].downloads += 1;
      saveStats(); updateSummary(); selDownloadsEl.textContent = stats[selectedToolId].downloads;
    }

    // copy output
    function copyOutput(){
      const text = outputArea.textContent || '';
      if(!text){ alert('No output to copy'); return; }
      navigator.clipboard?.writeText(text).then(()=> alert('Copied to clipboard') ).catch(()=> alert('Copy failed — browser may restrict clipboard.'));
    }

    // owner settings functions
    function loadOwnerToForm(){
      ownerNameInput.value = owner.name || '';
      donateLinksInput.value = (owner.donate || []).join(', ');
      renderDonateButtons();
    }
    function saveOwnerFromForm(){
      owner.name = ownerNameInput.value || '';
      owner.donate = donateLinksInput.value.split(',').map(s=>s.trim()).filter(Boolean);
      saveOwner(); alert('Owner settings saved locally.');
      renderDonateButtons();
    }
    function resetOwner(){
      if(!confirm('Reset owner settings?')) return;
      owner = {};
      saveOwner();
      loadOwnerToForm();
      renderDonateButtons();
    }
    function renderDonateButtons(){
      donateArea.innerHTML = '';
      const links = owner.donate || [];
      if(!links.length){
        donateArea.innerHTML = '<div class="small muted">Donate (visible to users) — no links configured.</div>';
        return;
      }
      const frag = document.
        function renderDonateButtons(){
  donateArea.innerHTML = '';
  const links = owner.donate || [];
  if(!links.length){
    donateArea.innerHTML = '<div class="small muted">Donate (visible to users) — no links configured.</div>';
    return;
  }

  // create fragment and buttons
  const frag = document.createDocumentFragment();
  links.forEach((l, idx) => {
    const a = document.createElement('a');
    a.href = l;
    a.target = '_blank';
    a.rel = 'noopener noreferrer';
    a.className = 'badge';
    a.style.marginRight = '8px';
    // friendly label depending on link type
    let label = 'Donate';
    const lower = l.toLowerCase();
    if(lower.startsWith('upi:') || lower.includes('upi')) label = 'Pay UPI';
    else if(lower.includes('paypal.me') || lower.includes('paypal')) label = 'PayPal';
    else if(lower.includes('ko-fi') || lower.includes('kofi')) label = 'Ko-fi';
    else if(lower.includes('razorpay') || lower.includes('paytm')) label = 'Pay';
    // display label and short link
    a.textContent = label;
    a.title = l;
    frag.appendChild(a);

    // Also add a small copy button next to each link for users who want to copy UPI or link
    const copyBtn = document.createElement('button');
    copyBtn.className = 'ghost';
    copyBtn.style.padding = '6px';
    copyBtn.style.fontSize = '12px';
    copyBtn.textContent = 'Copy';
    copyBtn.title = 'Copy link to clipboard';
    copyBtn.addEventListener('click', (ev) => {
      ev.preventDefault();
      try {
        navigator.clipboard.writeText(l).then(() => {
          copyBtn.textContent = 'Copied';
          setTimeout(()=> copyBtn.textContent = 'Copy', 1200);
        }).catch(() => {
          // fallback: create temporary input
          const tmp = document.createElement('input');
          tmp.value = l;
          document.body.appendChild(tmp);
          tmp.select();
          try{ document.execCommand('copy'); copyBtn.textContent='Copied'; } catch(e){ alert('Copy failed — manually copy: ' + l); }
          tmp.remove();
          setTimeout(()=> copyBtn.textContent = 'Copy', 1200);
        });
      } catch(e){
        alert('Copy not supported: ' + e.message);
      }
    });

    frag.appendChild(copyBtn);
  });

  donateArea.appendChild(frag);
    }
    
