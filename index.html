<!doctype html>
<html lang="hi">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Omniverse AI Tools Marketplace — Local Demo</title>
  <meta name="description" content="Zero-cost, donation-ready, localStorage-based Omniverse tools demo (Hindi UI)" />
  <style>
    :root{
      --bg:#071225; --card:#0b1220; --muted:#9fb0d9; --accent:#60a5fa; --glass: rgba(255,255,255,0.03);
      --success:#16a34a; --danger:#ef4444;
    }
    *{box-sizing:border-box}
    html,body{height:100%;margin:0;font-family:Inter,ui-sans-serif,system-ui,Roboto,Arial;background:linear-gradient(180deg,#041226 0%, #02101b 100%);color:#e6eef8}
    .wrap{max-width:1100px;margin:18px auto;padding:16px;display:grid;grid-template-columns:320px 1fr;gap:16px}
    header{grid-column:1/-1;display:flex;align-items:center;gap:12px}
    h1{margin:0;font-size:18px}
    .card{background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(0,0,0,0.01));border:1px solid var(--glass);padding:12px;border-radius:10px}
    label{display:block;font-size:13px;color:var(--muted);margin-top:8px}
    input[type="text"], textarea, select {width:100%;padding:8px;border-radius:8px;border:1px solid rgba(255,255,255,0.04);background:transparent;color:inherit}
    button{background:transparent;border:1px solid rgba(255,255,255,0.06);color:inherit;padding:8px 10px;border-radius:8px;cursor:pointer}
    .muted{color:var(--muted);font-size:13px}
    .small{font-size:13px}
    .tools-list{margin-top:8px;display:flex;flex-direction:column;gap:8px}
    .tool-item{display:flex;justify-content:space-between;align-items:center;padding:8px;border-radius:8px;background:rgba(0,0,0,0.02);border:1px solid rgba(255,255,255,0.02)}
    .tool-item .meta{font-size:13px;color:var(--muted)}
    .flex{display:flex;gap:8px;align-items:center}
    .right-panel{display:grid;grid-template-rows:auto 1fr;gap:12px}
    .controls{display:flex;gap:8px;flex-wrap:wrap}
    textarea{min-height:120px;resize:vertical}
    .output{white-space:pre-wrap;background:linear-gradient(180deg,#021226,#00121a);padding:12px;border:1px solid rgba(255,255,255,0.03);border-radius:8px;min-height:160px}
    .stat{display:inline-block;background:rgba(255,255,255,0.02);padding:6px 8px;border-radius:999px;font-size:13px;margin-right:6px}
    .donates a{display:inline-block;margin-right:8px;padding:6px 8px;border-radius:6px;border:1px solid rgba(255,255,255,0.03);text-decoration:none;color:inherit}
    footer{grid-column:1/-1;text-align:center;color:var(--muted);font-size:13px;margin-top:8px}
    .toolbar{display:flex;gap:8px;align-items:center;margin-top:8px}
    .danger{border-color:rgba(255,80,80,0.2);color:var(--danger)}
    .success{border-color:rgba(40,200,120,0.12);color:var(--success)}
    .center{display:flex;align-items:center;gap:8px}
    .hidden{display:none}
    @media(max-width:900px){.wrap{grid-template-columns:1fr;padding:12px}}
  </style>
</head>
<body>
  <div class="wrap">
    <header>
      <div>
        <h1>Omniverse AI Tools Marketplace — Local Demo</h1>
        <div class="muted">Zero-cost · Donation-ready · settings & stats local to your browser</div>
      </div>
      <div style="margin-left:auto" class="muted small">Local demo — कोई external API नहीं</div>
    </header>

    <!-- LEFT: Owner Settings & Marketplace Controls -->
    <aside class="card">
      <h3 style="margin:0 0 6px 0">Owner Settings (Local)</h3>
      <div class="muted small">Owner settings केवल आपके ब्राउज़र में सेव होते हैं।</div>

      <label>Owner name</label>
      <input id="ownerName" type="text" placeholder="आपका नाम (Owner)" />

      <label>Donate / Pay links (comma separated)</label>
      <input id="ownerDonates" type="text" placeholder="upi:abc@bank, https://paypal.me/you, https://ko-fi.com/you" />

      <div class="toolbar" style="margin-top:10px">
        <button id="saveOwner">Save Settings</button>
        <button id="exportOwner">Export</button>
        <button id="importOwner">Import</button>
        <button id="resetOwner" class="danger">Reset</button>
      </div>

      <hr style="margin:12px 0;border:none;border-top:1px solid rgba(255,255,255,0.02)" />

      <h3 style="margin:0 0 6px 0">Marketplace Controls</h3>
      <div class="muted small">Tools and stats localStorage में रहते हैं।</div>

      <div style="margin-top:8px">
        <div class="small">Owner: <span id="statOwner">—</span></div>
        <div class="small">Tools: <span id="statTools">0</span></div>
        <div class="small">Downloads: <span id="statDownloads">0</span></div>
        <div class="small">Uses: <span id="statUses">0</span></div>
      </div>

      <div class="controls" style="margin-top:10px">
        <button id="addDemo">+ Add Demo Tools</button>
        <button id="resetTools" class="danger">Reset Tools</button>
        <button id="openDashboard">Open Dashboard</button>
      </div>

      <hr style="margin:12px 0;border:none;border-top:1px solid rgba(255,255,255,0.02)" />

      <h3 style="margin:0 0 6px 0">Tools list</h3>
      <div class="muted small">Import / Export</div>
      <label class="small">Paste exported JSON here</label>
      <textarea id="importJson" placeholder='{"owner":{...},"tools":[...],"stats":{...}}'></textarea>
      <div class="toolbar" style="margin-top:8px">
        <button id="applyImport">Apply Import</button>
        <button id="exportAll">Export All</button>
      </div>
    </aside>

    <!-- RIGHT: Tools & Editor -->
    <section class="right-panel">
      <div class="card">
        <div style="display:flex;justify-content:space-between;align-items:center">
          <div>
            <strong>— Select a tool —</strong>
            <div class="muted small">Tools are local. Generate outputs, download, tip owner.</div>
          </div>
          <div class="center">
            <span class="stat" id="selUses">Selected Uses: 0</span>
            <span class="stat" id="selDownloads">Downloads: 0</span>
          </div>
        </div>

        <div style="margin-top:12px;display:flex;gap:12px">
          <div style="flex:1">
            <select id="toolsSelect"><option value="">(No tool)</option></select>
            <div class="muted small" style="margin-top:8px" id="toolDesc">Tool description will appear here.</div>
          </div>
          <div style="width:220px">
            <div class="muted small">Tip: structured JSON input देने से output बेहतर होगा।</div>
            <label class="small">Enter JSON input for the selected tool</label>
            <textarea id="toolInput" placeholder='{"name":"Your Name","field":"AI"}'></textarea>
            <div class="toolbar" style="margin-top:8px">
              <button id="generate">Generate</button>
              <button id="clearOutput">Clear</button>
              <button id="copyOutput">Copy</button>
              <button id="downloadOutput">⬇️ Download</button>
            </div>
          </div>
        </div>
      </div>

      <div class="card" style="overflow:auto">
        <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:8px">
          <strong>AI output (demo — client-side)</strong>
          <div class="muted small">No external APIs called. Owner can export/import settings.</div>
        </div>

        <div id="outputArea" class="output">AI output will appear here...</div>

        <div style="margin-top:10px;display:flex;justify-content:space-between;align-items:center">
          <div class="donates" id="donateLinks"></div>
          <div class="controls">
            <button id="resetToolStats" class="small danger">Reset Tool Stats</button>
            <button id="exportTool">Export Tool</button>
          </div>
        </div>
      </div>
    </section>

    <footer>
      © Omniverse Marketplace — localStorage only · Deploy: GitHub Pages · Settings & stats local to your browser · For paid integrations (UPI/PayPal) add links in Owner Settings
    </footer>
  </div>

  <script>
  // Single-file logic — replace old file with this full file whenever you want changes.
  (function(){
    // storage key
    const LS = 'omniverse_marketplace_v1';

    // DOM
    const ownerNameEl = document.getElementById('ownerName');
    const ownerDonatesEl = document.getElementById('ownerDonates');
    const saveOwnerBtn = document.getElementById('saveOwner');
    const exportOwnerBtn = document.getElementById('exportOwner');
    const importOwnerBtn = document.getElementById('importOwner');
    const resetOwnerBtn = document.getElementById('resetOwner');

    const statOwner = document.getElementById('statOwner');
    const statTools = document.getElementById('statTools');
    const statDownloads = document.getElementById('statDownloads');
    const statUses = document.getElementById('statUses');

    const addDemoBtn = document.getElementById('addDemo');
    const resetToolsBtn = document.getElementById('resetTools');
    const openDashboardBtn = document.getElementById('openDashboard');

    const importJsonEl = document.getElementById('importJson');
    const applyImportBtn = document.getElementById('applyImport');
    const exportAllBtn = document.getElementById('exportAll');

    const toolsSelect = document.getElementById('toolsSelect');
    const toolDesc = document.getElementById('toolDesc');
    const toolInput = document.getElementById('toolInput');
    const generateBtn = document.getElementById('generate');
    const clearOutputBtn = document.getElementById('clearOutput');
    const copyOutputBtn = document.getElementById('copyOutput');
    const downloadOutputBtn = document.getElementById('downloadOutput');

    const outputArea = document.getElementById('outputArea');
    const donateLinksEl = document.getElementById('donateLinks');
    const selUses = document.getElementById('selUses');
    const selDownloads = document.getElementById('selDownloads');
    const resetToolStatsBtn = document.getElementById('resetToolStats');
    const exportToolBtn = document.getElementById('exportTool');

    // defaults
    const DEFAULT = {
      owner: { name: '', donateLinks: [] },
      tools: [],
      stats: { uses: 0, downloads: 0 }
    };

    // load / save
    function load() {
      try {
        const raw = localStorage.getItem(LS);
        if (!raw) return JSON.parse(JSON.stringify(DEFAULT));
        return JSON.parse(raw);
      } catch (e) {
        console.error('load err', e);
        return JSON.parse(JSON.stringify(DEFAULT));
      }
    }
    function save(state) {
      localStorage.setItem(LS, JSON.stringify(state));
      renderState();
    }

    // initial state
    let state = load();

    // utilities
    function id() { return 't_' + Math.random().toString(36).slice(2,9); }
    function pretty(obj){ try { return JSON.stringify(obj, null, 2); } catch { return String(obj); } }
    function downloadText(filename, text){
      const a = document.createElement('a');
      a.href = URL.createObjectURL(new Blob([text], {type:'text/plain'}));
      a.download = filename;
      document.body.appendChild(a);
      a.click();
      a.remove();
    }

    // render
    function renderState(){
      // owner
      ownerNameEl.value = state.owner.name || '';
      ownerDonatesEl.value = (state.owner.donateLinks || []).join(', ');
      statOwner.textContent = state.owner.name || '—';

      // stats
      statTools.textContent = (state.tools || []).length;
      statDownloads.textContent = (state.stats.downloads || 0);
      statUses.textContent = (state.stats.uses || 0);

      // tools select
      const prev = toolsSelect.value;
      toolsSelect.innerHTML = '<option value="">(No tool)</option>';
      (state.tools || []).forEach(t => {
        const opt = document.createElement('option');
        opt.value = t.id;
        opt.textContent = t.name;
        toolsSelect.appendChild(opt);
      });
      toolsSelect.value = prev;
      updateSelectedTool();

      // donate links
      donateLinksEl.innerHTML = '';
      (state.owner.donateLinks || []).forEach(link => {
        const a = document.createElement('a');
        a.href = link.trim();
        a.target = '_blank';
        a.rel = 'noopener noreferrer';
        a.textContent = (link.startsWith('upi:') ? 'UPI' : link.replace(/^https?:\/\//,'').replace(/\/$/, ''));
        donateLinksEl.appendChild(a);
      });

      // selected stats update
      updateGlobalStatsDisplays();
    }

    function updateSelectedTool(){
      const tid = toolsSelect.value;
      if(!tid){ toolDesc.textContent = 'Tool description will appear here.'; selUses.textContent = 'Selected Uses: 0'; selDownloads.textContent = 'Downloads: 0'; return; }
      const t = (state.tools || []).find(x => x.id === tid);
      if(!t) return;
      toolDesc.textContent = t.description || '—';
      selUses.textContent = 'Selected Uses: ' + (t.uses || 0);
      selDownloads.textContent = 'Downloads: ' + (t.downloads || 0);
      toolInput.value = t.sampleInput || '';
    }

    function updateGlobalStatsDisplays(){
      statUses.textContent = state.stats.uses || 0;
      statDownloads.textContent = state.stats.downloads || 0;
    }

    // actions
    saveOwnerBtn.addEventListener('click', ()=>{
      state.owner.name = ownerNameEl.value.trim();
      const links = ownerDonatesEl.value.split(',').map(s=>s.trim()).filter(Boolean);
      state.owner.donateLinks = links;
      save(state);
      alert('Owner settings saved locally.');
    });

    exportOwnerBtn.addEventListener('click', ()=>{
      const out = {owner: state.owner};
      downloadText('omniverse-owner.json', JSON.stringify(out, null, 2));
    });

    importOwnerBtn.addEventListener('click', ()=>{
      const txt = prompt('Paste owner JSON here (e.g. {"owner":{"name":"You","donateLinks":["upi:abc@bank"]}} )');
      if(!txt) return;
      try{
        const j = JSON.parse(txt);
        if(j.owner) state.owner = j.owner;
        save(state);
        alert('Owner imported.');
      }catch(e){ alert('Invalid JSON'); }
    });

    resetOwnerBtn.addEventListener('click', ()=>{
      if(!confirm('Reset owner settings?')) return;
      state.owner = {name:'', donateLinks:[]};
      save(state);
    });

    addDemoBtn.addEventListener('click', ()=>{
      // add a few demo tools
      const demos = [
        { id: id(), name: 'Resume Builder', description: 'AI-assisted resume (demo). Provide {"name":"Your Name","role":"Engineer","skills":["..."]}', sampleInput: '{"name":"Ram","role":"Frontend Developer","skills":["HTML","CSS","JS"]}', uses:0, downloads:0 },
        { id: id(), name: 'Short Bio Generator', description: 'Write a short professional bio. Provide {"name":"Your Name","field":"Design"}', sampleInput: '{"name":"Sita","field":"Product Design"}', uses:0, downloads:0 },
        { id: id(), name: 'Social Caption Maker', description: 'Create Instagram captions. Provide {"theme":"motivation","length":"short"}', sampleInput: '{"theme":"motivation","length":"short"}', uses:0, downloads:0 },
        { id: id(), name: 'Simple Website Template', description: 'Generate a minimal HTML page. Provide {"title":"Site title","tagline":"..."}', sampleInput: '{"title":"My Site","tagline":"Welcome!"}', uses:0, downloads:0 }
      ];
      state.tools = (state.tools || []).concat(demos);
      save(state);
    });

    resetToolsBtn.addEventListener('click', ()=>{
      if(!confirm('Reset ALL tools (this will remove tools & stats)?')) return;
      state.tools = [];
      state.stats = {uses:0, downloads:0};
      save(state);
    });

    openDashboardBtn.addEventListener('click', ()=>{
      alert('Dashboard placeholder — in full system this opens analytics. (Local demo)');
    });

    applyImportBtn.addEventListener('click', ()=>{
      const txt = importJsonEl.value.trim();
      if(!txt){ alert('Paste JSON to import'); return; }
      try{
        const j = JSON.parse(txt);
        // basic validation
        state.owner = j.owner || state.owner;
        state.tools = j.tools || state.tools;
        state.stats = j.stats || state.stats;
        save(state);
        alert('Imported');
      }catch(e){ alert('Invalid JSON'); }
    });

    exportAllBtn.addEventListener('click', ()=>{
      downloadText('omniverse-export.json', JSON.stringify(state, null, 2));
    });

    // tools selection
    toolsSelect.addEventListener('change', updateSelectedTool);

    // generation (mock-AI)
    function renderMockAI(tool, inputObj){
      // Very simple deterministic template-based generator per tool name
      // This is client-side MOCK — replace with real API later
      const name = inputObj.name || inputObj.title || inputObj.theme || 'User';
      const outParts = [];
      outParts.push('=== Omniverse AI Tools — Demo Output ===');
      outParts.push('Tool: ' + tool.name);
      outParts.push('Owner: ' + (state.owner.name || '—'));
      outParts.push('');
      // custom behavior by tool name heuristic
      const tname = tool.name.toLowerCase();
      if(tname.includes('resume')){
        outParts.push(`Name: ${inputObj.name || '—'}`);
        outParts.push(`Role: ${inputObj.role || '—'}`);
        outParts.push(`Skills: ${(inputObj.skills || []).join(', ') || '—'}`);
        outParts.push('');
        outParts.push('Experience: Write 3 bullet points about recent projects using your role & skills.');
      } else if(tname.includes('bio')){
        outParts.push(`${name} is a ${inputObj.field || 'professional'} known for delivering high-quality work. They focus on ${inputObj.focus || 'their craft'}.`);
      } else if(tname.includes('caption')){
        const theme = inputObj.theme || 'creative';
        const len = inputObj.length || 'short';
        outParts.push(`[${theme} • ${len}]`);
        outParts.push('1) Keep going — small caption example...');
        outParts.push('2) Another caption variant...');
      } else if(tname.includes('website')){
        outParts.push(`<!doctype html>\n<html>\n<head><title>${inputObj.title || 'My Site'}</title></head>\n<body>\n<h1>${inputObj.title || 'Welcome'}</h1>\n<p>${inputObj.tagline || ''}</p>\n</body>\n</html>`);
      } else {
        outParts.push('Input JSON: ' + JSON.stringify(inputObj, null, 2));
        outParts.push('');
        outParts.push('Generic generated text (demo). Replace this with real AI call when ready.');
      }
      outParts.push('');
      outParts.push('--- End of demo output ---');
      return outParts.join('\\n');
    }

    generateBtn.addEventListener('click', ()=>{
      const tid = toolsSelect.value;
      if(!tid){ alert('Please select a tool'); return; }
      const tool = (state.tools || []).find(x => x.id === tid);
      if(!tool){ alert('Tool not found'); return; }
      let inputRaw = toolInput.value.trim();
      let parsed = {};
      if(!inputRaw){
        // try to use sampleInput
        inputRaw = tool.sampleInput || '';
      }
      try{
        if(inputRaw) parsed = JSON.parse(inputRaw);
      }catch(e){
        // if not JSON, treat as text
        parsed = { text: inputRaw };
      }
      // generate mock output
      const out = renderMockAI(tool, parsed);
      outputArea.textContent = out;

      // update stats
      tool.uses = (tool.uses || 0) + 1;
      state.stats.uses = (state.stats.uses || 0) + 1;
      save(state);
      updateSelectedTool();
    });

    clearOutputBtn.addEventListener('click', ()=>{
      outputArea.textContent = 'AI output will appear here...';
    });

    copyOutputBtn.addEventListener('click', ()=>{
      const text = outputArea.textContent || '';
      if(!text){ alert('No output'); return; }
      navigator.clipboard.writeText(text).then(()=> alert('Copied to clipboard') ).catch(()=> alert('Copy failed'));
    });

    downloadOutputBtn.addEventListener('click', ()=>{
      const text = outputArea.textContent || '';
      if(!text){ alert('No output to download'); return; }
      const tid = toolsSelect.value;
      const tool = (state.tools || 
