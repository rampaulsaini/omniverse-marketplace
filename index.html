<!doctype html>
<html lang="hi">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>Omniverse Marketplace ‚Äî AI & Tips Demo</title>
<style>
:root{--bg:#071026;--card:#07182a;--muted:#9fb0d9;--accent:#60a5fa;--glass:rgba(255,255,255,0.03);}
html,body{margin:0;height:100%;font-family:Inter,sans-serif;background:var(--bg);color:#e6eef8;}
.container{max-width:1100px;margin:12px auto;padding:12px;}
h1{margin:0;font-size:22px;}
.sub{color:var(--muted);font-size:13px;}
.grid{display:grid;grid-template-columns:320px 1fr;gap:12px;margin-top:12px;}
.card{background:linear-gradient(180deg,var(--card),#021426);border:1px solid var(--glass);padding:12px;border-radius:10px;}
button{background:transparent;border:1px solid rgba(255,255,255,0.06);padding:6px 10px;border-radius:8px;color:#e6eef8;cursor:pointer;}
input,textarea{width:100%;padding:8px;border-radius:8px;border:1px solid rgba(255,255,255,0.04);background:transparent;color:#e6eef8;box-sizing:border-box;}
label{display:block;font-size:13px;margin-top:8px;color:var(--muted);}
.muted{color:var(--muted);font-size:13px;}
.tools-list{display:flex;flex-direction:column;gap:6px;margin-top:8px;}
.tool-item{display:flex;justify-content:space-between;align-items:center;padding:6px;border-radius:6px;background:rgba(255,255,255,0.01);border:1px solid rgba(255,255,255,0.02);}
.panel{padding:12px;border-radius:8px;background:linear-gradient(180deg,rgba(255,255,255,0.01),transparent);border:1px solid rgba(255,255,255,0.02);}
pre{background:#021a2a;padding:12px;border-radius:8px;overflow:auto;color:#dff0ff;white-space:pre-wrap;word-break:break-word;}
.accent{background:linear-gradient(90deg,#1e3a8a,#60a5fa);border:none;color:#021426;}
.danger{border:1px solid rgba(255,80,80,0.25);color:#ffb4b4;}
.badge{background:rgba(255,255,255,0.02);padding:4px 6px;border-radius:6px;font-size:13px;color:var(--muted);}
@media(max-width:900px){.grid{grid-template-columns:1fr}}
</style>
</head>
<body>
<div class="container">
<h1>Omniverse Marketplace ‚Äî AI & Tips Demo</h1>
<div class="sub">Client-side demo ¬∑ Paytm / PayPal tips ¬∑ AI template generate</div>

<div class="grid">
<!-- LEFT PANEL -->
<div>
  <div class="card">
    <strong>Owner Settings</strong>
    <label>Owner name</label>
    <input id="ownerName" placeholder="‡§Ü‡§™‡§ï‡§æ ‡§®‡§æ‡§Æ">
    <label>Pay / Donate Links (comma separated)</label>
    <input id="ownerLinks" placeholder="upi:abc@paytm, https://paypal.me/you">
    <div style="display:flex;gap:6px;margin-top:6px">
      <button id="saveOwner" class="accent">Save</button>
      <button id="exportOwner">Export</button>
      <button id="importOwnerBtn">Import</button>
    </div>
    <hr>
    <strong>Tools</strong>
    <div class="tools-list" id="toolsList"></div>
    <div style="display:flex;gap:6px;margin-top:6px">
      <button id="addToolBtn" class="accent">+ Add Tool</button>
      <button id="resetTools" class="danger">Reset All Tools</button>
    </div>
    <hr>
    <strong>Owner Links</strong>
    <div id="ownerLinksRender"></div>
  </div>
</div>

<!-- RIGHT PANEL -->
<div>
  <div class="card panel">
    <div id="toolArea">
      <div id="noToolMsg">‡§ï‡•É‡§™‡§Ø‡§æ ‡§¨‡§æ‡§è‡§Å ‡§∏‡•á ‡§è‡§ï tool ‡§ö‡•Å‡§®‡•á‡§Ç‡•§</div>
      <div id="toolMain" style="display:none">
        <h3 id="toolTitle"></h3>
        <div class="muted" id="toolDesc"></div>
        <label>Input JSON:</label>
        <textarea id="toolInput" rows="4"></textarea>
        <div style="display:flex;gap:6px;margin-top:6px">
          <button id="generateBtn" class="accent">Generate</button>
          <button id="clearOutput">Clear</button>
          <button id="copyOutput">Copy</button>
          <button id="downloadOutput">‚¨áÔ∏è Download</button>
          <button id="resetToolStats" class="danger">Reset Stats</button>
        </div>
        <label style="margin-top:6px;">Output (live client-side)</label>
        <pre id="toolOutput"></pre>
        <hr>
        <div>
          <label>Tool Editor</label>
          <input id="editorName" placeholder="Tool name">
          <input id="editorDesc" placeholder="Short description" style="margin-top:4px">
          <textarea id="editorTemplate" rows="6" placeholder="Hello {{name}}, welcome to {{field}}" style="margin-top:4px"></textarea>
          <textarea id="editorExample" rows="3" placeholder='{"name":"Aman","field":"AI"}' style="margin-top:4px"></textarea>
          <div style="display:flex;gap:6px;margin-top:4px">
            <button id="saveToolBtn" class="accent">Save Tool</button>
            <button id="delToolBtn" class="danger">Delete Tool</button>
            <button id="cloneToolBtn">Clone Tool</button>
          </div>
        </div>
        <hr>
        <div class="muted">Tips Received: <span id="toolTips">0</span></div>
        <div style="display:flex;gap:6px;margin-top:4px">
          <button id="tipPaytm">üí∞ Paytm Tip</button>
          <button id="tipPaypal">üí≥ PayPal Tip</button>
        </div>
      </div>
    </div>
  </div>
</div>
</div>

<script>
// STORAGE
const LS_TOOLS='omniverse_tools_v3',LS_STATS='omniverse_stats_v3',LS_OWNER='omniverse_owner_v3';
let state={tools:{},stats:{},owner:{},selected:null};

// UTIL
function uid(name){ return (name||'tool').toLowerCase().replace(/[^a-z0-9]+/g,'-')+Math.random().toString(36).slice(2,6);}
function downloadText(filename,text){ const blob=new Blob([text],{type:'text/plain;charset=utf-8'}); const a=document.createElement('a');a.href=URL.createObjectURL(blob);a.download=filename;a.click();}

// LOAD/SAVE
function loadTools(){ try{return JSON.parse(localStorage.getItem(LS_TOOLS)||'{}')}catch(e){return{}} }
function saveTools(t){ localStorage.setItem(LS_TOOLS,JSON.stringify(t)); }
function loadStats(){ try{return JSON.parse(localStorage.getItem(LS_STATS)||'{}')}catch(e){return{} } }
function saveStats(s){ localStorage.setItem(LS_STATS,JSON.stringify(s)); }
function loadOwner(){ try{return JSON.parse(localStorage.getItem(LS_OWNER)||'{}')}catch(e){return{} } }
function saveOwner(o){ localStorage.setItem(LS_OWNER,JSON.stringify(o)); }

// STATE INIT
state.tools=loadTools(); state.stats=loadStats(); state.owner=loadOwner();

// --- OWNER LINKS RENDER ---
function renderOwnerLinks(){ const links=(state.owner.links||[]); ownerLinksRender.innerHTML=links.map(l=>{ let href=l.trim(),label=href,icon=''; if(href.startsWith('upi:')){ href=`https://paytm.me/${href.slice(4)}`; label='Paytm'; icon='üí∞';} else if(href.includes('paypal.me')){ label='PayPal'; icon='üí≥'; } return `<div><a href="${href}" target="_blank" style="color:var(--accent)">${icon} ${label}</a></div>` }).join(''); }

// --- RENDER TOOLS ---
function renderToolsList(){ toolsList.innerHTML=''; Object.keys(state.tools).forEach(k=>{ const t=state.tools[k]; const s=state.stats[k]||{uses:0,downloads:0,tips:0}; const el=document.createElement('div'); el.className='tool-item'; el.innerHTML=`<div>${t.name}</div><div><button data-s="${k}" class="openBtn">Open</button></div>`; toolsList.appendChild(el); el.querySelector('.openBtn').addEventListener('click',()=>selectTool(k));});}
function selectTool(slug){ const t=state.tools[slug]; if(!t) return; state.selected=slug; toolMain.style.display='block'; noToolMsg.style.display='none'; toolTitle.textContent=t.name; toolDesc.textContent=t.desc||''; toolInput.value=t.example||''; editorName.value=t.name; editorDesc.value=t.desc||''; editorTemplate.value=t.template||''; editorExample.value=t.example||''; toolTips.textContent=(state.stats[slug]?.tips||0); }

// --- GENERATE OUTPUT CLIENT-SIDE ---
function generateOutput(){ const slug=state.selected; if(!slug) return; const t=state.tools[slug]; let inp={}; try{inp=JSON.parse(toolInput.value||'{}')}catch(e){toolOutput.textContent='Invalid JSON'; return;} let out=t.template; Object.keys(inp).forEach(k=>{ const re=new RegExp('{{'+k+'}}','g'); out=out.replace(re,inp[k]); }); toolOutput.textContent=out; state.stats[slug].uses=(state.stats[slug].uses||0)+1; saveStats(state.stats); }

// --- TOOL MANAGEMENT ---
function addTool(){ const slug=uid('New Tool'); state.tools[slug]={name:'New Tool',desc:'Demo desc',template:'Hello {{name}}','example':'{"name":"Aman"}'}; state.stats[slug]={uses:0,downloads:0,tips:0}; saveTools(state.tools); renderToolsList(); selectTool(slug); }
function saveTool(){ const slug=state.selected; if(!slug) return; state.tools[slug]={name:editorName.value,desc:editorDesc.value,template:editorTemplate.value,example:editorExample.value}; saveTools(state.tools); renderToolsList(); selectTool(slug); }
function deleteTool(){ const slug=state.selected; if(!slug) return; delete state.tools[slug]; delete state.stats[slug]; saveTools(state.tools); saveStats(state.stats); renderToolsList(); toolMain.style.display='none'; noToolMsg.style.display='block'; state.selected=null; }

// --- TIPS ---
function tipPaytm(){ const slug=state.selected; if(!slug) return; const link=state.owner.links?.find(l=>l.startsWith('upi:')); if(!link){alert('Owner Paytm link not set');return;} window.open(`https://paytm.me/${link.slice(4)}`,'_blank'); state.stats[slug].tips=(state.stats[slug].tips||0)+1; toolTips.textContent=state.stats[slug].tips; saveStats(state.stats);}
function tipPaypal(){ const slug=state.selected; if(!slug) return; const link=state.owner.links?.find(l=>l.includes('paypal.me')); if(!link){alert('Owner PayPal link not set');return;} window.open(link,'_blank'); state.stats[slug].tips=(state.stats[slug].tips||0)+1; toolTips.textContent=state.stats[slug].tips; saveStats(state.stats); }

// --- EVENT LISTENERS ---
saveOwner.addEventListener('click',()=>{ state.owner.name=ownerName.value; state.owner.links=(ownerLinks.value||'').split(',').map(s=>s.trim()).filter(Boolean); saveOwner(state.owner); renderOwnerLinks();});
addToolBtn.addEventListener('click',addTool);
saveToolBtn.addEventListener('click',saveTool);
delToolBtn.addEventListener('click',deleteTool);
cloneToolBtn.addEventListener('click',()=>{ const slug=state.selected; if(!slug) return; const newSlug=uid(state.tools[slug].name+'-copy'); state.tools[newSlug]={...state.tools[slug]}; state.stats[newSlug]={uses:0,downloads:0,tips:0}; saveTools(state.tools); saveStats(state.stats); renderToolsList(); selectTool(newSlug);});
generateBtn.addEventListener('click',generateOutput);
clearOutput.addEventListener('click',()=>{ toolOutput.textContent='';});
copyOutput.addEventListener('click',()=>{ navigator.clipboard.writeText(toolOutput.textContent||''); alert('Copied!');});
downloadOutput.addEventListener('click',()=>{ downloadText(state.tools[state.selected]?.name+'.txt',toolOutput.textContent||''); state.stats[state.selected].downloads=(state.stats[state.selected].downloads||0)+1; saveStats(state.stats);});
resetToolStats.addEventListener('click',()=>{ const s=state.selected; if(!s) return; state.stats[s]={uses:0,downloads:0,tips:0}; toolTips.textContent='0'; saveStats(state.stats);});
tipPaytmBtn.addEventListener('click',tipPaytm);
tipPaypalBtn.addEventListener('click',tipPaypal);

// INITIAL RENDER
renderOwnerLinks(); renderToolsList();
</script>
</body>
</html>
